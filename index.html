<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ibonarium.time</title>

<!-- сучасний шрифт -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400&display=swap" rel="stylesheet">

<style>
:root{
  --gold:#d4af37;
}

*{ box-sizing:border-box; }

html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#04060c;
  font-family:'Inter',system-ui,sans-serif;
  overflow:hidden;
}

/* ===== ЗІРКИ ===== */
#stars,#stars2{
  position:absolute;
  inset:0;
  background-repeat:repeat;
  animation: drift linear infinite;
}

#stars{
  background-image:
    radial-gradient(1px 1px at 20px 30px, white, transparent),
    radial-gradient(1px 1px at 200px 150px, white, transparent),
    radial-gradient(1px 1px at 400px 80px, white, transparent);
  opacity:.6;
  animation-duration:180s;
}

#stars2{
  background-image:
    radial-gradient(1.5px 1.5px at 100px 200px, white, transparent),
    radial-gradient(1.5px 1.5px at 300px 400px, white, transparent);
  opacity:.3;
  animation-duration:320s;
}

@keyframes drift{
  from{ transform:translate(0,0); }
  to{ transform:translate(-50%,-50%); }
}

/* ===== ЦЕНТР ===== */
#wrap{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

canvas{
  width:min(78vw,78vh);
  height:min(78vw,78vh);
  backdrop-filter: blur(2px);
  filter: drop-shadow(0 0 24px rgba(212,175,55,.15));
}
</style>
</head>

<body>

<div id="stars"></div>
<div id="stars2"></div>

<div id="wrap">
  <canvas id="clock"></canvas>
</div>

<script>
const canvas = document.getElementById("clock");
const ctx = canvas.getContext("2d");

function resize(){
  const s = Math.min(innerWidth, innerHeight) * 0.8;
  canvas.width = s * devicePixelRatio;
  canvas.height = s * devicePixelRatio;
  ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
}
resize();
addEventListener("resize", resize);

function draw(){
  const w = canvas.width / devicePixelRatio;
  const h = canvas.height / devicePixelRatio;
  const cx = w/2, cy = h/2;
  const r = w*0.45;

  /* плавний хвіст */
  ctx.fillStyle = "rgba(4,6,12,0.25)";
  ctx.fillRect(0,0,w,h);

  /* прозоре кільце */
  ctx.beginPath();
  ctx.arc(cx,cy,r,0,Math.PI*2);
  ctx.strokeStyle="rgba(255,255,255,.12)";
  ctx.lineWidth=1;
  ctx.stroke();

  /* поділки */
  for(let i=0;i<60;i++){
    const a=i*Math.PI/30;
    const len=i%5===0?r*0.06:r*0.035;
    ctx.strokeStyle=i%5===0?
      "rgba(255,255,255,.45)":
      "rgba(255,255,255,.18)";
    ctx.lineWidth=i%5===0?1.3:1;
    ctx.beginPath();
    ctx.moveTo(
      cx+Math.sin(a)*(r-len),
      cy-Math.cos(a)*(r-len)
    );
    ctx.lineTo(
      cx+Math.sin(a)*r,
      cy-Math.cos(a)*r
    );
    ctx.stroke();
  }

  /* 24 години */
  ctx.fillStyle="rgba(255,255,255,.6)";
  ctx.font=`${r*0.095}px Inter`;
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  for(let h=0;h<24;h++){
    const a=h*Math.PI/12;
    ctx.fillText(
      h,
      cx+Math.sin(a)*r*0.68,
      cy-Math.cos(a)*r*0.68
    );
  }

  const now = new Date();
  const hour = now.getHours() + now.getMinutes()/60;
  const min  = now.getMinutes() + now.getSeconds()/60;
  const sec  = now.getSeconds() + now.getMilliseconds()/1000;

  const hand = (a,l,w,c,glow=0)=>{
    ctx.save();
    ctx.strokeStyle=c;
    ctx.lineWidth=w;
    ctx.lineCap="round";
    ctx.shadowColor=c;
    ctx.shadowBlur=glow;
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.lineTo(
      cx+Math.sin(a)*l,
      cy-Math.cos(a)*l
    );
    ctx.stroke();
    ctx.restore();
  };

  /* година / хвилина */
  hand(hour*Math.PI/12, r*0.48, r*0.035, "#d4af37", 12);
  hand(min*Math.PI/30,  r*0.7,  r*0.022, "rgba(255,255,255,.85)", 8);

  /* ===== СЕКУНДНА СТРІЛКА З AURA ===== */
  const pulse = 10 + Math.sin(sec*2*Math.PI)*6;

  for(let i=4;i>=1;i--){
    hand(
      sec*Math.PI/30,
      r*(0.8+i*0.01),
      r*(0.02+i*0.006),
      `rgba(255,90,90,${0.08*i})`,
      pulse*i
    );
  }

  hand(
    sec*Math.PI/30,
    r*0.82,
    r*0.012,
    "rgba(255,120,120,.95)",
    18
  );

  /* центр */
  ctx.beginPath();
  ctx.arc(cx,cy,r*0.035,0,Math.PI*2);
  ctx.fillStyle="#d4af37";
  ctx.shadowBlur=12;
  ctx.shadowColor="#d4af37";
  ctx.fill();
  ctx.shadowBlur=0;

  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
